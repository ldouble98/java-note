# tcp 三次握手 四次挥手

```
1. 客户端问服务器准备好了吗？
2.1 服务器回准备好了，
2.2 服务器问客户端准备好了吗?
3 客户端回准备好了

服务端客户端 建立连接
1 客户端发出结束请求
2 服务端向客户端发我接收了 
3 服务端向客户端发出关闭收信息 （这里发出结束请求的客户端 会等2个传输报文的时间）
4 客户端向客户端发ack确认信息

这里2、3不能合为一步的原因：
    1.服务端close 是我们主动调用close、在2 服务端收到请求，而这时还没有
       关闭资源，这时因为tcp是可靠协议不能一直等，就先将我收到请求返回
    2.服务端在发出关闭收信息时，客户端还要回一个确认，所以在3返回后，客户端收到信息，
      这时不能立刻关闭客户端，因为在4步骤中可能会发生报文丢失等服务端没有收到应答信息，
      这是服务器会重新发送信息给客户端。

```